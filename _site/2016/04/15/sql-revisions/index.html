<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      SQL Revisions &middot; ηї☂їᾔ
    
  </title>

  <!-- CSS -->
  <!-- <link rel="stylesheet" href="public/css/poole.css">
  <link rel="stylesheet" href="public/css/syntax.css">
  <link rel="stylesheet" href="public/css/hyde.css"> -->

<!-- Removed site.baseurl variable based on this artical
https://github.com/biopython/biopython.github.io/issues/120 -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">


  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1 class="logo">
        <!-- <a href=""> -->
        <a href="/">
          ηї☂їᾔ
        </a>
      </h1>
      <p class="lead"></p>
      <!-- Hiding  -->
      <!-- <a href="/index.html"><img src="/public/logo.png" alt="NITIN"/></a> -->
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      

      <!-- Putting the Page explicitly -->
      <a class="sidebar-nav-item" href="/about">About</a>


<!--  <a class="sidebar-nav-item" href="static/java_revisions">Coding</a>
      <a class="sidebar-nav-item" href="static/projects">Projects</a> -->
       

      <i> -- Tools -- </i>
      <!-- Generte the Links dynamically for the STATIC Pages -->
      
      
        
          
        
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/static/codingHints/">Coding Hints</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/static/java_revisions/">Syntax Reference</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/static/problemProfiles/">Profiles</a>
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      

      <i> -- Connect -- </i>
      <a class="sidebar-nav-item" href="https://github.com/nitinkc" target="_blank">GitHub</a>
      <a class="sidebar-nav-item" href="https://www.linkedin.com/in/nitinchaurasia" target="_blank" > LinkedIn </a>
      <a class="sidebar-nav-item" href="http://blogs.bgsu.edu/nitinc/" target="_blank" > BGSU Blog </a>
      <!-- <span class="sidebar-nav-item">Currently v0.0.1</span> -->

      <i> -- Resources -- </i>
      <a href="https://nitinc.gitbooks.io/developer-machine-setup-guide/content/" target="_blank"> Machine Setup</a>
    </nav>

    <div class="acknowledgement"
    <p> Thanks to Mark Otto for <cite><a href="http://hyde.getpoole.com/">Hyde </a></cite> </p>
  </div>


  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">SQL Revisions</h1>
  <span class="post-date">15 Apr 2016</span>
  <p><a href="https://en.wikibooks.org/wiki/SQL_Exercises/Employee_management" target="\_blank">Exercise 1</a></p>

<p><a href="https://en.wikibooks.org/wiki/SQL_Exercises" target="\_blank">Exercise 2</a></p>

<h5 id="sql">SQL</h5>

<p><i class="fa fa-question"></i> Retrieve a particular empid.</p>

<blockquote>
  <p><i class="fa fa-check"></i>
 Use <strong>where</strong> clause</p>
</blockquote>

<p><i class="fa fa-question"></i> How many types to delete the data</p>

<blockquote>
  <ul>
    <li>truncate (deletes data but not table): TRUNCATE removes all rows from a table</li>
    <li>The DELETE command is used to remove rows from a table
      <ul>
        <li>DELETE FROM emp WHERE job = ‘CLERK’;</li>
        <li>you need to COMMIT or ROLLBACK the transaction to make the change permanent</li>
      </ul>
    </li>
    <li>drop table/database : deletes a table/database
      <ul>
        <li>All the tables’ rows, indexes and privileges will also be removed</li>
        <li>The operation cannot be rolled back.</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p><strong>Find count departments id where more than 5 employees.</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">"# employees"</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">dname</span>
      <span class="k">from</span> <span class="n">dept</span> <span class="n">d</span><span class="p">,</span> <span class="n">employees</span> <span class="n">e</span><span class="p">,</span> <span class="n">mapping</span> <span class="n">m</span>
      <span class="k">where</span> <span class="n">e</span><span class="p">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">eid</span> <span class="k">AND</span> <span class="n">d</span><span class="p">.</span><span class="n">did</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">did</span>
      <span class="k">group</span> <span class="k">by</span> <span class="n">d</span><span class="p">.</span><span class="n">dname</span>
      <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>SET Theory</strong>: Inline-view, TOP-N Analysis</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Select 11th heighest salary.</span>
<span class="k">select</span> <span class="n">EMP_ID</span><span class="p">,</span> <span class="n">SALARY</span>
<span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">EMPLOYEE</span> <span class="k">order</span> <span class="k">by</span> <span class="n">salary</span> <span class="k">desc</span><span class="p">)</span>
<span class="k">where</span> <span class="n">rownum</span> <span class="o">&lt;</span> <span class="mi">12</span>
<span class="n">MINUS</span>
<span class="k">select</span> <span class="n">EMP_ID</span><span class="p">,</span> <span class="n">SALARY</span>
<span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">EMPLOYEE</span> <span class="k">order</span> <span class="k">by</span> <span class="n">salary</span> <span class="k">desc</span><span class="p">)</span>
<span class="k">where</span> <span class="n">rownum</span> <span class="o">&lt;</span> <span class="mi">11</span>
</code></pre></div></div>

<p><strong>Name all the depts with more than 5 employees.</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">d</span><span class="p">.</span><span class="n">dname</span>
      <span class="k">from</span> <span class="n">dept</span> <span class="n">d</span><span class="p">,</span> <span class="n">employees</span> <span class="n">e</span><span class="p">,</span> <span class="n">mapping</span> <span class="n">m</span>
      <span class="k">where</span> <span class="n">e</span><span class="p">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">eid</span> <span class="k">AND</span> <span class="n">d</span><span class="p">.</span><span class="n">did</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">did</span>
      <span class="k">group</span> <span class="k">by</span> <span class="n">d</span><span class="p">.</span><span class="n">dname</span>
      <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="joins">JOINS</h2>

<p>JOINS : To combine rows from two or more tables, based on common fields between them.</p>

<p><strong>INNER JOIN</strong>: (Common Type) – EQUI JOIN, NON-EQUI JOIN, NATURAL JOIN, SELF JOIN</p>

<p>Return rows as long as there one match in both tables</p>

<p><strong>OUTER JOIN</strong> (Smarter than inner)– LEFT, RIGHT &amp; FULL</p>

<p><em>OUTER is result of INNER &amp; some additional data from one of the tables or from both the tables</em></p>

<ul>
  <li>
    <p><strong>LEFT OUTER JOIN</strong>: Return all rows from the left table, even if there are
 no matches in the right table and all matching rows from right</p>
  </li>
  <li>
    <p><strong>RIGHT OUTER JOIN</strong>: Return all rows from the right table and matching rows from left</p>
  </li>
  <li>
    <p><strong>FULL OUTER JOIN</strong>: Return rows when there is a match in one of the tables</p>
  </li>
</ul>

<p><img src="http://localhost:4000/media/Joins.png" alt="alt text" /></p>

<blockquote>
  <p>The USING clause</p>
</blockquote>

<p>The USING clause is used if several columns share the same name but you don’t want to join using all of these common columns. The columns listed in the USING clause can’t have any qualifiers in the statement, including the WHERE clause.</p>

<blockquote>
  <p>The ON clause</p>
</blockquote>

<p>The ON clause is used to join tables where the column names don’t match in both tables. The join conditions are removed from the filter conditions in the WHERE clause.</p>

<pre><code class="language-SQL">-- OUTER JOIN is smarter than INNER
-- Customer – cust_id - 1,2,3
-- Sales – cust_id - 3, 6

Select * from customer c, sales s where c.cust_id = s.cust_id

Select * from customer c LEFT OUTER JOIN sales s ON c.cust_id = s.sales_id
Select * from customer c RIGHT OUTER JOIN sales s ON c.cust_id = s.sales_id
Select * from customer c FULL OUTER JOIN sales s ON c.cust_id = s.sales_id
</code></pre>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- INNER</span>
<span class="k">select</span> <span class="n">t1</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="k">where</span> <span class="n">t1</span><span class="p">.</span><span class="k">c</span> <span class="o">=</span> <span class="n">t2</span><span class="p">.</span><span class="k">c</span>
<span class="k">And</span> <span class="n">t2</span><span class="p">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">2000</span>

<span class="c1">-- SELF JOIN only one table is involved in join</span>
<span class="k">Select</span> <span class="n">t1</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">KYC</span> <span class="n">k1</span><span class="p">,</span> <span class="n">KYC</span> <span class="n">k2</span> <span class="k">where</span> <span class="n">k1</span><span class="p">.</span><span class="n">kyc_ind</span> <span class="o">=</span> <span class="n">K2</span><span class="p">.</span><span class="n">kyc_ind</span>

<span class="k">SELECT</span> <span class="n">SSN</span><span class="p">,</span> <span class="n">E</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">EName</span><span class="p">,</span> <span class="n">LastName</span><span class="p">,</span> <span class="n">D</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">DName</span><span class="p">,</span> <span class="n">Department</span><span class="p">,</span> <span class="n">Code</span><span class="p">,</span> <span class="n">Budget</span>
 <span class="k">FROM</span> <span class="n">Employees</span> <span class="n">E</span> <span class="o">**</span><span class="k">INNER</span> <span class="k">JOIN</span><span class="o">**</span> <span class="n">Departments</span> <span class="n">D</span>
 <span class="o">**</span><span class="k">ON</span><span class="o">**</span> <span class="n">E</span><span class="p">.</span><span class="n">Department</span> <span class="o">=</span> <span class="n">D</span><span class="p">.</span><span class="n">Code</span><span class="p">;</span>

 <span class="o">**</span><span class="k">IS</span> <span class="n">SAME</span> <span class="k">AS</span><span class="o">**</span>

 <span class="k">SELECT</span> <span class="n">SSN</span><span class="p">,</span> <span class="n">E</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">Name_E</span><span class="p">,</span> <span class="n">LastName</span><span class="p">,</span> <span class="n">D</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">Name_D</span><span class="p">,</span> <span class="n">Department</span><span class="p">,</span> <span class="n">Code</span><span class="p">,</span> <span class="n">Budget</span>
 <span class="k">FROM</span> <span class="o">**</span><span class="n">Employees</span> <span class="n">E</span><span class="p">,</span> <span class="n">Departments</span> <span class="n">D</span><span class="o">**</span>
 <span class="o">**</span><span class="k">where</span><span class="o">**</span> <span class="n">E</span><span class="p">.</span><span class="n">Department</span> <span class="o">=</span> <span class="n">D</span><span class="p">.</span><span class="n">Code</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>SELF JOIN</strong> – only one table is involved in join <br /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">e1</span><span class="p">.</span><span class="n">ename</span><span class="o">||</span><span class="s1">' works for '</span><span class="o">||</span><span class="n">e2</span><span class="p">.</span><span class="n">ename</span>  <span class="k">AS</span>
<span class="nv">"Employees and their Managers"</span>
<span class="k">FROM</span> <span class="n">emp</span> <span class="n">e1</span> <span class="k">JOIN</span> <span class="n">emp</span> <span class="n">e2</span> <span class="k">ON</span> <span class="p">(</span><span class="n">e1</span><span class="p">.</span><span class="n">mgr</span> <span class="o">=</span> <span class="n">e2</span><span class="p">.</span><span class="n">empno</span><span class="p">);</span>
</code></pre></div></div>

<p>OR can be written as</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">e1</span><span class="p">.</span><span class="n">ename</span><span class="o">||</span><span class="s1">' works for '</span><span class="o">||</span><span class="n">e2</span><span class="p">.</span><span class="n">ename</span>  <span class="k">AS</span>
<span class="nv">"Employees and their Managers"</span>
<span class="k">FROM</span> <span class="n">emp</span> <span class="n">e1</span><span class="p">,</span> <span class="n">emp</span> <span class="n">e2</span> <span class="k">where</span> <span class="p">(</span><span class="n">e1</span><span class="p">.</span><span class="n">mgr</span> <span class="o">=</span> <span class="n">e2</span><span class="p">.</span><span class="n">empno</span><span class="p">);</span>
</code></pre></div></div>

<hr />

<p><i class="fa fa-question"></i> explain plan, performance tuning.</p>

<ul>
  <li>The EXPLAIN PLAN statement displays execution plans chosen by the Oracle optimizer for SELECT, UPDATE, INSERT, and DELETE statements. A statement’s execution plan is the sequence of operations Oracle performs to run the statement.</li>
</ul>

<p><i class="fa fa-question"></i> syntax for finding indexes in tuning.</p>

<blockquote>
  <p>Indexes are special lookup tables that the database search engine can use to
speed up data retrieval. An index is a pointer to data in a
table.</p>
  <pre>
CREATE UNIQUE INDEX index_name
ON table_name (column_name)
</pre>
  <p><i class="fa fa-question"></i> full table scan</p>
</blockquote>

<p><i class="fa fa-question"></i> index advantegs of indexes in sql tuning? What is the syntax of doing that.</p>
<blockquote>
  <p>Indexes are a performance drag when the time comes to modify records.</p>
</blockquote>

<p><i class="fa fa-question"></i></p>

<blockquote>
  <p>Multiple Conditions : AND <br /></p>
  <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">from</span> <span class="n">EMP</span> <span class="k">WHERE</span> <span class="n">salary</span> <span class="o">&gt;</span> <span class="mi">10000</span> <span class="k">AND</span> <span class="n">dateofjoining</span> <span class="o">&gt;</span> <span class="err">‘</span><span class="mi">1</span><span class="o">-</span><span class="n">Jan</span><span class="o">-</span><span class="mi">1990</span><span class="err">’</span> <span class="p">;</span>
</code></pre></div>  </div>
  <p><br />Range Selection - BETWEEN</p>
  <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">from</span> <span class="n">EMP</span> <span class="k">WHERE</span> <span class="n">salary</span> <span class="k">between</span> <span class="mi">9000</span> <span class="k">AND</span> <span class="mi">20000</span><span class="p">;</span>
</code></pre></div>  </div>
  <p><br />Exact List Matching</p>
  <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">from</span> <span class="n">EMP</span> <span class="k">WHERE</span> <span class="n">employeeID</span> <span class="k">IN</span> <span class="p">(</span><span class="mi">3001</span><span class="p">,</span>  <span class="mi">3002</span><span class="p">);</span>
</code></pre></div>  </div>
</blockquote>

<p><i class="fa fa-question"></i> Full table scan</p>

<ul>
  <li>A full table scan occurs when an index is either not used or there is no index on the table(s)</li>
  <li>Full table scans should be avoided when reading large tables.For example, a full table scan is performed when a table that does not have an index is read</li>
  <li>FTS will be performed even though an index is present on that table.
    <ul>
      <li>If a query does have a WHERE clause, but none of the columns in that WHERE clause match.</li>
      <li>when WHERE clause prevents the use of an index like below.</li>
      <li>If the NOT EQUAL (the “&lt;&gt;“) operator is used.</li>
      <li>If the NOT operator is used.</li>
      <li>If the wildcard operator is used in the first position of a comparison string. An example is “WHERE NAME LIKE ‘%INTERVIEW%’”.</li>
    </ul>
  </li>
</ul>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2019/04/12/CollectionClass/">
            Preparation Schedule
            <small>12 Apr 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2018/01/30/JavaInterviewQuestions/">
            Java Interview Questions
            <small>30 Jan 2018</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2018/01/23/CollectionClass/">
            Collection Class
            <small>23 Jan 2018</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
       <script>
       /**
       * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
       */

       /* var disqus_config = function () {
       this.page.url = "/2016/04/15/sql-revisions/"; // Replace PAGE_URL with your page's canonical URL variable
       this.page.identifier = "A7655498-AB9E-40BF-A0D5-E5C6DE6BBF28"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
     }; */

       (function() { // DON'T EDIT BELOW THIS LINE
       var d = document, s = d.createElement('script');

       s.src = '//codersblog.disqus.com/embed.js';

       s.setAttribute('data-timestamp', +new Date());
       (d.head || d.body).appendChild(s);
       })();
       </script>
       <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

    </div>

  </body>
</html>
